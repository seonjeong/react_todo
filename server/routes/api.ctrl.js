const data = [{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목0',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목1',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목2',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목3',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목4',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목5',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목6',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목7',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목8',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    },{
        'images' : 'https://image.aladin.co.kr/product/17554/20/cover500/8954653847_1.jpg',
        'title': '책 제목9',
        'star': '5',
        'author': '지은이',
        'publisher': '출판사',
        'pubdate': '2016',
        'description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor id aliquid provident repellendus pariatur, commodi illum neque architecto animi, dicta numquam, inventore accusamus libero, dolorem iste soluta natus unde repellat!',
        'comment': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit deleniti enim natus tempore, similique inventore laudantium fugiat maxime possimus modi eaque aspernatur aut doloribus! Tempore earum veritatis itaque excepturi vitae?'
    }]

exports.list = (req, res) => {
        const body = data;
        res.header("Access-Control-Allow-Origin", "*");
        res.status(200);
        res.send(body);
        res.end();
    }

exports.detail = (req, res) => {
        const index = req.query.index || 0;
        const body = data[index];
        res.header("Access-Control-Allow-Origin", "*");
        res.status(200);
        res.send(body);
        res.end();
    }

exports.search = (req, res) => {
    var api_url = 'https://openapi.naver.com/v1/search/book.json?query=' +  encodeURI(req.query.title)+'&start=10';
    var clientID = 'ZTbGxg0EAhq3DDBJEJbi';
    var clientPW = 'JT5ysgConQ';
    var request = require('request');
    var options = {
        url: api_url,
        headers: {'X-Naver-Client-Id':clientID, 'X-Naver-Client-Secret': clientPW}
    };
    request.get(options, function (error, response, body) {
    if (!error && response.statusCode == 200) {
        res.header("Access-Control-Allow-Origin", "*");
        res.writeHead(200, {'Content-Type': 'text/json;charset=utf-8'});
        res.end(body);
    } else {
        res.status(response.statusCode).end();
        console.log('error = ' + response.statusCode);
     }
   });
}

exports.form = (req, res) => {
    console.log('------------------------------------------------------------')
    console.log(req.body)
    console.log('------------------------------------------------------------')
    res.setHeader("Access-Control-Allow-Origin","*");
    res.writeHead(200, {'Content-Type': 'text/json;charset=utf-8'});
    res.end('body')
        
}
